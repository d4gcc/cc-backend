function uniqueByKey(e,a){return e?[...new Map(e.map(e=>[e[a],e])).values()]:[]}$(document).ready(function(){globalThis.nb_sub_fam=0;let e=sessionStorage.getItem("cart")?JSON.parse(sessionStorage.getItem("cart")).length:0;$("#checkout").empty().append(`<h4>Your selection: ${e}</h4>`),$.ajax({url:sub_fam_url,success:function(e){globalThis.res=e,nb_sub_fam=e.length},error:function(e){$("#div1").html("<strong>Error</strong>")}}),$.ajax({url:our_url,success:function(e){globalThis.practices=e;$("<div> <ul>"),$("</div> </ul>");for(var a="",s=0;s<nb_sub_fam;s++){a+='<div class="panel"><div class="panel-heading" role="tab" id="heading'+s+'"><h4 class="panel-title"><a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse'+s+'" aria-expanded="true" aria-controls="collapse'+s+'">'+globalThis.res[s].recommendation+'</a></h4></div><div id="collapse'+s+'" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="heading'+s+'"><div class="panel-body"><ul>';for(var l=0;l<e.length;l++)if(e[l].subFamilyId==s+e[0].subFamilyId){if(null!=e[l].indicators)var i=(i=e[l].indicators.replace("X",e[l].XIndicator)).replace("Y",e[l].YIndicator);var t='<li class = ".col-6"><div class="element"><div class="element-left"><input type="checkbox" name="'+e[l].id+'" id="'+e[l].practiceId+'"/></div><div class="element-right"><p class="location">'+e[l].formalType+"</p>"+(e[l].unmissable?'<p class="location">Unmissable</p>':"")+'<h2 class="name">'+e[l].precisionOfRecommendations+'</h2><p class="title">'+e[l].criteria+'</p><p class="location">'+i+'</p><div class="interests"><p class="interests_title"></p><span class="interests_item">People: '+e[l].people+'</span><span class="interests_item">Planet: '+e[l].planet+'</span><span class="interests_item">Difficulty: '+e[l].difficulty+'</span><span class="interests_item">Priority: '+e[l].priority+"</span></div></div></div></li>";a+=t,t="",e[l].Family=String(family),e[l].subFamily=globalThis.res[s].recommendation}a+="</ul></div></div></div>"}$("#wkslist").append(a)},error:function(e){$("#div1").html("<strong>Error</strong>")}}),$(".collapse.in").prev(".panel-heading").addClass("active"),$("#accordion, #bs-collapse").on("show.bs.collapse",function(e){$(e.target).prev(".panel-heading").addClass("active")}).on("hide.bs.collapse",function(e){$(e.target).prev(".panel-heading").removeClass("active")})}),$("#buttonCheck").on("click",function(e){e.preventDefault();for(var a=globalThis.practices,s=JSON.parse(sessionStorage.getItem("cart"))||[],l=0;l<a.length;l++){(document.getElementById(a[l].practiceId).checked||a[l].unmissable)&&s.push(a[l])}s=uniqueByKey(s,"id"),sessionStorage.setItem("cart",JSON.stringify(s)),$("#checkout").empty().append(`<h4>Your selection: ${JSON.parse(sessionStorage.getItem("cart")).length}</h4>`)});